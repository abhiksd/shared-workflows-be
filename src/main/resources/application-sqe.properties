# =======================================================================
# SQE (SYSTEM QUALITY ENGINEERING) ENVIRONMENT CONFIGURATION
# =======================================================================

# Environment-specific information
spring.profiles.active=sqe
environment.name=sqe
environment.short=sqe

# MONITORING
api.endpoint=my-app
api.name=Helper App (SQE)
api.version=v1-sqe

# Server Configuration
server.error.whitelabel.enabled=false
server.port=${SERVER_PORT:8280}
server.servlet.context-path=/my-app

# =======================================================================
# AZURE KEY VAULT INTEGRATION (SQE)
# =======================================================================

# Enable Key Vault for SQE environment
azure.keyvault.enabled=true
azure.keyvault.uri=${AZURE_KEYVAULT_URI:https://kv-my-app-sqe.vault.azure.net/}
azure.keyvault.tenant-id=${AZURE_TENANT_ID}
azure.keyvault.client-id=${AZURE_CLIENT_ID}

# =======================================================================
# THIRD PARTY INTEGRATIONS
# =======================================================================

# Back4Product Reference URL (SQE)
back4product.ref.url=${BACK4PRODUCT_REF_URL:https://pnehelper-sqe.schneider-electric.com/back4product/v1/}

# =======================================================================
# DATABASE CONFIGURATION (MONGODB)
# =======================================================================

# MongoDB Configuration (SQE - from Key Vault)
spring.data.mongodb.database=my-app-sqe
spring.data.mongodb.uri=${mongodb-connection-string-sqe}
spring.data.mongodb.health.uri=${mongodb-health-connection-string-sqe}

# SQE connection pool settings
spring.data.mongodb.options.connections-per-host=50
spring.data.mongodb.options.min-connections-per-host=10
spring.data.mongodb.options.max-connection-idle-time=60000
spring.data.mongodb.options.max-connection-life-time=120000
spring.data.mongodb.options.connect-timeout=10000
spring.data.mongodb.options.socket-timeout=20000
spring.data.mongodb.options.server-selection-timeout=20000

# =======================================================================
# CACHE CONFIGURATION
# =======================================================================

# Memcached Configuration (SQE)
memcached.addresses=${memcached-addresses-sqe:sqe.cfg.euw1.cache.amazonaws.com:11211}
memcached.expiration.sec=3600
memcached.binary.protocol=true
memcached.timeout.millis=3000

# Caffeine Local Cache (SQE)
cafeine.expiration.sec=21600
spring.cache.type=caffeine
spring.cache.caffeine.spec=maximumSize=500,expireAfterAccess=21600s

# Redis Configuration (SQE)
spring.redis.host=${redis-host-sqe:sqe-redis.cache.windows.net}
spring.redis.port=${redis-port:6380}
spring.redis.password=${redis-password-sqe}
spring.redis.ssl=true
spring.redis.timeout=2000ms
spring.redis.jedis.pool.max-active=15
spring.redis.jedis.pool.max-idle=8
spring.redis.jedis.pool.min-idle=3

# =======================================================================
# SECURITY CONFIGURATION
# =======================================================================

# JWT Configuration (SQE - from Key Vault)
jwt.secret=${jwt-secret-sqe}
jwt.expiration=${jwt-expiration:86400}
jwt.refresh-expiration=${jwt-refresh-expiration:604800}
jwt.issuer=my-app-sqe

# CORS Configuration (SQE)
cors.allowed-origins=${cors-allowed-origins-sqe:https://sqe.mydomain.com,https://test.mydomain.com}
cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
cors.allowed-headers=Authorization,Content-Type,X-Requested-With,Accept,Origin,Access-Control-Request-Method,Access-Control-Request-Headers
cors.allow-credentials=true
cors.max-age=3600

# SSL/TLS Configuration
server.ssl.enabled=false
# SSL handled by Azure Application Gateway

# =======================================================================
# MONITORING & LOGGING
# =======================================================================

# Logging Configuration (SQE - balanced verbosity)
logging.level.root=INFO
logging.level.com.mycompany=INFO
logging.level.org.springframework.web=INFO
logging.level.org.springframework.security=INFO
logging.level.org.mongodb.driver=INFO

# Application Insights (SQE)
azure.application-insights.instrumentation-key=${application-insights-key-sqe}
azure.application-insights.enabled=true

# Metrics
management.metrics.export.azuremonitor.enabled=true
management.metrics.export.azuremonitor.instrumentation-key=${application-insights-key-sqe}

# Health checks (moderate detail for SQE)
management.endpoint.health.show-details=when-authorized
management.endpoints.web.exposure.include=health,info,metrics,prometheus,env

# =======================================================================
# PERFORMANCE & RESILIENCE
# =======================================================================

# Connection timeout settings
spring.datasource.hikari.connection-timeout=15000
spring.datasource.hikari.maximum-pool-size=30
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=300000

# Circuit breaker configuration
resilience4j.circuitbreaker.instances.mongodb.sliding-window-size=8
resilience4j.circuitbreaker.instances.mongodb.failure-rate-threshold=60
resilience4j.circuitbreaker.instances.mongodb.wait-duration-in-open-state=20s

# Retry configuration
resilience4j.retry.instances.mongodb.max-attempts=3
resilience4j.retry.instances.mongodb.wait-duration=1s

# Rate limiting
resilience4j.ratelimiter.instances.api.limit-for-period=2000
resilience4j.ratelimiter.instances.api.limit-refresh-period=1s
resilience4j.ratelimiter.instances.api.timeout-duration=3s

# =======================================================================
# DEPLOYMENT CONFIGURATION
# =======================================================================

# Deployment configuration (rolling for SQE)
deployment.strategy=rolling
deployment.slot=${DEPLOYMENT_SLOT:blue}
deployment.blue-green.enabled=${BLUE_GREEN_ENABLED:false}

# Feature flags for SQE
feature.new-features.enabled=${FEATURE_NEW_FEATURES_ENABLED:true}
feature.experimental.enabled=${FEATURE_EXPERIMENTAL_ENABLED:true}

# =======================================================================
# TESTING CONFIGURATION
# =======================================================================

# Test automation support
test.automation.enabled=true
test.data.reset.enabled=true
test.performance.monitoring.enabled=true

# Test data configuration
test.data.enabled=true
test.data.cleanup=true
test.data.seed.enabled=true

# Mock configurations for testing
external.services.mock.enabled=${MOCK_EXTERNAL_SERVICES:false}
external.services.timeout.override=${TEST_TIMEOUT_OVERRIDE:5000}

# =======================================================================
# EXTERNAL SERVICES
# =======================================================================

# External API configurations (SQE)
external.api.timeout=15000
external.api.retry.max-attempts=2
external.api.retry.delay=1000

# OAuth2 Configuration (SQE)
spring.security.oauth2.client.registration.azure.client-id=${oauth2-client-id-sqe}
spring.security.oauth2.client.registration.azure.client-secret=${oauth2-client-secret-sqe}
spring.security.oauth2.client.registration.azure.scope=openid,profile,email
spring.security.oauth2.client.provider.azure.issuer-uri=${oauth2-issuer-uri-sqe}

# =======================================================================
# SQE SPECIFIC CONFIGURATIONS
# =======================================================================

# Quality gates
quality.gate.performance.threshold.response-time=2000
quality.gate.performance.threshold.throughput=100
quality.gate.reliability.threshold.uptime=99.5

# Load testing configuration
load.test.max-concurrent-users=100
load.test.ramp-up-time=60
load.test.duration=300