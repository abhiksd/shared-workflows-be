# =======================================================================
# COMMON CONFIGURATION (SHARED ACROSS ALL ENVIRONMENTS)
# =======================================================================

# Application Configuration
spring.application.name=my-app
spring.main.banner-mode=console

# JSON Configuration
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.serialization.fail-on-empty-beans=false
spring.jackson.deserialization.fail-on-unknown-properties=false
spring.jackson.default-property-inclusion=NON_NULL

# Time zone configuration
spring.jackson.time-zone=UTC
user.timezone=UTC

# Thread pool configuration
spring.task.execution.pool.core-size=8
spring.task.execution.pool.max-size=16
spring.task.execution.pool.queue-capacity=100
spring.task.execution.thread-name-prefix=async-task-

# Async configuration
spring.task.scheduling.pool.size=5
spring.task.scheduling.thread-name-prefix=scheduled-task-

# =======================================================================
# MONGODB COMMON CONFIGURATION
# =======================================================================

# MongoDB common settings
spring.data.mongodb.auto-index-creation=true
spring.data.mongodb.field-naming-strategy=org.springframework.data.mapping.model.SnakeCaseFieldNamingStrategy

# MongoDB connection pool defaults
spring.data.mongodb.options.heartbeat-frequency=10000
spring.data.mongodb.options.min-heartbeat-frequency=500
spring.data.mongodb.options.socket-keep-alive=true

# =======================================================================
# HTTP CLIENT CONFIGURATION
# =======================================================================

# RestTemplate configuration
http.client.connection-timeout=10000
http.client.read-timeout=30000
http.client.max-connections=100
http.client.max-connections-per-route=20

# =======================================================================
# CACHE COMMON CONFIGURATION
# =======================================================================

# Common cache configuration
spring.cache.cache-names=users,products,sessions,metadata
spring.cache.caffeine.spec=maximumSize=1000,expireAfterWrite=3600s

# =======================================================================
# SECURITY COMMON CONFIGURATION
# =======================================================================

# Common security headers
security.headers.frame-options=DENY
security.headers.content-type-options=nosniff
security.headers.xss-protection=1; mode=block

# Session configuration
server.servlet.session.timeout=30m
server.servlet.session.tracking-modes=cookie
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.secure=true
server.servlet.session.cookie.same-site=strict

# =======================================================================
# ACTUATOR COMMON CONFIGURATION
# =======================================================================

# Management endpoints
management.server.port=${server.port}
management.endpoints.enabled-by-default=false
management.endpoint.health.enabled=true
management.endpoint.info.enabled=true
management.endpoint.metrics.enabled=true
management.endpoint.prometheus.enabled=true

# Info endpoint configuration
info.app.encoding=@project.build.sourceEncoding@
info.app.java.source=@java.version@
info.app.java.target=@java.version@

# =======================================================================
# VALIDATION CONFIGURATION
# =======================================================================

# Bean validation
spring.validation.bind-errors=true

# =======================================================================
# INTERNATIONAL CONFIGURATION
# =======================================================================

# Locale configuration
spring.web.locale=en_US
spring.web.locale-resolver=fixed

# =======================================================================
# MULTIPART CONFIGURATION
# =======================================================================

# File upload configuration
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# =======================================================================
# ERROR HANDLING
# =======================================================================

# Common error handling
server.error.include-binding-errors=on-param
server.error.include-exception=false
server.error.include-stacktrace=on-param

# =======================================================================
# COMPRESSION CONFIGURATION
# =======================================================================

# Response compression
server.compression.enabled=true
server.compression.mime-types=text/html,text/xml,text/plain,text/css,text/javascript,application/javascript,application/json,application/xml

# =======================================================================
# THREAD DUMP CONFIGURATION
# =======================================================================

# Thread dump endpoint configuration
management.endpoint.threaddump.enabled=true