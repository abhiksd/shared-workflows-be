# =======================================================================
# PRODUCTION ENVIRONMENT CONFIGURATION
# =======================================================================

# Environment-specific information
spring.profiles.active=prod
environment.name=production
environment.short=prod

# MONITORING
api.endpoint=my-app
api.name=Helper App
api.version=v1

# Server Configuration
server.error.whitelabel.enabled=false
server.port=${SERVER_PORT:8280}
server.servlet.context-path=/my-app

# =======================================================================
# AZURE KEY VAULT INTEGRATION (PRODUCTION)
# =======================================================================

# Enable Key Vault for production
azure.keyvault.enabled=true
azure.keyvault.uri=${AZURE_KEYVAULT_URI:https://kv-my-app-prod.vault.azure.net/}
azure.keyvault.tenant-id=${AZURE_TENANT_ID}
azure.keyvault.client-id=${AZURE_CLIENT_ID}

# =======================================================================
# THIRD PARTY INTEGRATIONS
# =======================================================================

# Back4Product Reference URL
back4product.ref.url=https://pnehelper-emea.schneider-electric.com/back4product/v1/

# =======================================================================
# DATABASE CONFIGURATION (MONGODB)
# =======================================================================

# MongoDB Configuration (secrets from Key Vault)
spring.data.mongodb.database=my-app
spring.data.mongodb.uri=${mongodb-connection-string}
spring.data.mongodb.health.uri=${mongodb-health-connection-string}

# Connection pool settings
spring.data.mongodb.options.connections-per-host=100
spring.data.mongodb.options.min-connections-per-host=10
spring.data.mongodb.options.max-connection-idle-time=60000
spring.data.mongodb.options.max-connection-life-time=120000
spring.data.mongodb.options.connect-timeout=10000
spring.data.mongodb.options.socket-timeout=30000
spring.data.mongodb.options.server-selection-timeout=30000

# =======================================================================
# CACHE CONFIGURATION
# =======================================================================

# Memcached Configuration (ElastiCache)
memcached.addresses=${memcached-addresses:my.cfg.euw1.cache.amazonaws.com:11211}
memcached.expiration.sec=3600
memcached.binary.protocol=true
memcached.timeout.millis=5000
memcached.failure.mode=retry

# Caffeine Local Cache
cafeine.expiration.sec=86400
spring.cache.type=caffeine
spring.cache.caffeine.spec=maximumSize=1000,expireAfterAccess=86400s

# Redis Configuration (if using Redis)
spring.redis.host=${redis-host:prod-redis.cache.windows.net}
spring.redis.port=${redis-port:6380}
spring.redis.password=${redis-password}
spring.redis.ssl=true
spring.redis.timeout=2000ms
spring.redis.jedis.pool.max-active=20
spring.redis.jedis.pool.max-idle=10
spring.redis.jedis.pool.min-idle=5

# =======================================================================
# SECURITY CONFIGURATION
# =======================================================================

# JWT Configuration (from Key Vault)
jwt.secret=${jwt-secret}
jwt.expiration=${jwt-expiration:86400}
jwt.refresh-expiration=${jwt-refresh-expiration:604800}
jwt.issuer=my-app-prod

# CORS Configuration
cors.allowed-origins=${cors-allowed-origins:https://api.mydomain.com,https://app.mydomain.com}
cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
cors.allowed-headers=Authorization,Content-Type,X-Requested-With,Accept,Origin,Access-Control-Request-Method,Access-Control-Request-Headers
cors.allow-credentials=true
cors.max-age=3600

# SSL/TLS Configuration
server.ssl.enabled=false
# SSL handled by Azure Application Gateway

# =======================================================================
# MONITORING & LOGGING
# =======================================================================

# Logging Configuration
logging.level.root=WARN
logging.level.com.mycompany=INFO
logging.level.org.springframework.web=WARN
logging.level.org.springframework.security=WARN
logging.level.org.mongodb.driver=WARN

# Application Insights
azure.application-insights.instrumentation-key=${application-insights-key}
azure.application-insights.enabled=true

# Metrics
management.metrics.export.azuremonitor.enabled=true
management.metrics.export.azuremonitor.instrumentation-key=${application-insights-key}

# Health checks
management.endpoint.health.show-details=never
management.endpoints.web.exposure.include=health,info,metrics,prometheus

# =======================================================================
# PERFORMANCE & RESILIENCE
# =======================================================================

# Connection timeout settings
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.maximum-pool-size=50
spring.datasource.hikari.minimum-idle=10
spring.datasource.hikari.idle-timeout=300000

# Circuit breaker configuration
resilience4j.circuitbreaker.instances.mongodb.sliding-window-size=10
resilience4j.circuitbreaker.instances.mongodb.failure-rate-threshold=50
resilience4j.circuitbreaker.instances.mongodb.wait-duration-in-open-state=30s

# Retry configuration
resilience4j.retry.instances.mongodb.max-attempts=3
resilience4j.retry.instances.mongodb.wait-duration=1s

# Rate limiting
resilience4j.ratelimiter.instances.api.limit-for-period=1000
resilience4j.ratelimiter.instances.api.limit-refresh-period=1s
resilience4j.ratelimiter.instances.api.timeout-duration=5s

# =======================================================================
# BLUE-GREEN DEPLOYMENT
# =======================================================================

# Blue-Green deployment configuration
deployment.strategy=blue-green
deployment.slot=${DEPLOYMENT_SLOT:blue}
deployment.blue-green.enabled=${BLUE_GREEN_ENABLED:true}
deployment.namespace=${DEPLOYMENT_NAMESPACE:prod-my-app-${DEPLOYMENT_SLOT}}

# Feature flags for Blue-Green
feature.new-features.enabled=${FEATURE_NEW_FEATURES_ENABLED:false}
feature.experimental.enabled=false

# =======================================================================
# EXTERNAL SERVICES
# =======================================================================

# External API configurations
external.api.timeout=30000
external.api.retry.max-attempts=3
external.api.retry.delay=1000

# OAuth2 Configuration (if applicable)
spring.security.oauth2.client.registration.azure.client-id=${oauth2-client-id}
spring.security.oauth2.client.registration.azure.client-secret=${oauth2-client-secret}
spring.security.oauth2.client.registration.azure.scope=openid,profile,email
spring.security.oauth2.client.provider.azure.issuer-uri=${oauth2-issuer-uri}

# =======================================================================
# ACTUATOR PRODUCTION SETTINGS
# =======================================================================

# Actuator security
management.endpoint.health.group.readiness.include=readinessState,mongo,diskSpace
management.endpoint.health.group.liveness.include=livenessState,ping
management.endpoint.health.probes.enabled=true

# Disable sensitive endpoints in production
management.endpoint.env.enabled=false
management.endpoint.configprops.enabled=false
management.endpoint.beans.enabled=false
management.endpoint.shutdown.enabled=false