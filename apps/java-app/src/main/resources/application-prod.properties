# =================================
# Production Environment Configuration
# =================================

# Environment Information
app.environment=prod
app.description=Java App - Production Environment

# Server Configuration
server.port=8080

# =================================
# Logging Configuration (Production)
# =================================
logging.level.root=WARN
logging.level.com.example.javaapp=INFO
logging.level.org.springframework.web=WARN
logging.level.org.hibernate.SQL=WARN

# Logging to file in production
logging.file.name=/var/log/java-app/application.log
logging.file.max-size=100MB
logging.file.max-history=30
logging.file.total-size-cap=1GB

# =================================
# Database Configuration (Production)
# =================================
# Database configuration will be overridden by ConfigMap/Secret
# These are fallback values
spring.datasource.url=jdbc:h2:file:./data/proddb
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.username=${DB_USERNAME:sa}
spring.datasource.password=${DB_PASSWORD:}

# JPA Configuration for Production
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false

# H2 Console (disabled for production)
spring.h2.console.enabled=false

# =================================
# Custom Application Properties (Production)
# =================================

# Features Configuration (Production)
app.features.cache-enabled=true
app.features.metrics-enabled=true
app.features.audit-enabled=true
app.features.debug-mode=false

# Monitoring Configuration (Production)
app.monitoring.enabled=true
app.monitoring.metrics-port=8080
app.monitoring.metrics-path=/actuator/prometheus
app.monitoring.health-check-interval=60

# Security Configuration (Production - Most Secure)
app.security.cors-enabled=true
app.security.allowed-origins=https://api.example.com,https://app.example.com

# =================================
# Actuator Configuration (Production)
# =================================
# Minimal endpoints for production
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=never
management.endpoint.health.show-components=never
management.endpoint.configprops.show-values=never
management.endpoint.env.show-values=never

# Security for actuator endpoints
management.security.enabled=true
management.endpoint.health.cache.time-to-live=10s
management.endpoint.info.cache.time-to-live=10s

# =================================
# Production Specific Features
# =================================
# Disable DevTools for production
spring.devtools.restart.enabled=false
spring.devtools.livereload.enabled=false

# JSON Configuration for Production
spring.jackson.serialization.indent-output=false
spring.jackson.serialization.write-dates-as-timestamps=false

# SQL Initialization (disabled for production)
spring.sql.init.mode=never

# =================================
# Connection Pool Configuration (Production)
# =================================
spring.datasource.hikari.maximum-pool-size=50
spring.datasource.hikari.minimum-idle=10
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.leak-detection-threshold=60000

# =================================
# Caching Configuration (Production)
# =================================
spring.cache.type=caffeine
spring.cache.caffeine.spec=maximumSize=1000,expireAfterWrite=10m

# =================================
# Performance and Optimization (Production)
# =================================
# JVM Options (can be overridden by container)
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.jdbc.batch_versioned_data=true

# HTTP/2 Support
server.http2.enabled=true

# Compression
server.compression.enabled=true
server.compression.mime-types=text/html,text/css,text/javascript,application/javascript,application/json,application/xml,text/xml

# =================================
# Security Configuration (Production)
# =================================
# HTTPS Configuration (will be handled by ingress/load balancer)
server.ssl.enabled=false

# Security Headers
server.servlet.session.cookie.secure=true
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.same-site=strict

# =================================
# Resilience Configuration (Production)
# =================================
# Graceful shutdown
server.shutdown=graceful
spring.lifecycle.timeout-per-shutdown-phase=30s

# Thread Pool Configuration
server.tomcat.threads.max=200
server.tomcat.threads.min-spare=10
server.tomcat.max-connections=8192
server.tomcat.accept-count=100